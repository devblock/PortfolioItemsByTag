<!DOCTYPE html>
<html>
<head>
    <title>PortfolioItemsByTag</title>

    <script type="text/javascript" src="/apps/2.0/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",launch:function(){console.log("Welcome to the Portfolio Items By Tag app"),this._loadData()},_getFilters:function(pFilterTag){var tagFilter=Ext.create("Rally.data.wsapi.Filter",{property:"Tags.Name",operation:"=",value:pFilterTag});return console.log("Filter is ",""+tagFilter),tagFilter},_loadData:function(){console.log("START _loadData...");var filterTag="Enterprise Backlog",backlogFilters=this._getFilters(filterTag);this.portfolioItemStore?(console.log("    store exists..."),this.portfolioItemStore.setFilter(backlogFilters),this.portfolioItemStore.load()):(console.log("     store does not exist..."),this.portfolioItemStore=Ext.create("Rally.data.wsapi.TreeStoreBuilder").build({models:["PortfolioItem/Theme","PortfolioItem/Initiative","PortfolioItem/Feature"],autoLoad:!0,enableHierarchy:!0,pageSize:200,filters:backlogFilters,sorters:[{property:"PlannedStartDate",direction:"ASC"}],context:{workspace:"workspace/22050374191",project:"project/22050374281",projectScopeUp:!1,projectScopeDown:!0}}).then({success:this._createGrid,scope:this})),console.log("END _loadData")},_createGrid:function(pPortfolioItemStore){console.log("START _createGrid..."),this.portfolioItemGrid=Ext.create("Rally.ui.grid.TreeGrid",{store:pPortfolioItemStore,context:{workspace:"workspace/22050374191",project:"project/22050374281",projectScopeUp:!1,projectScopeDown:!0},enableEditing:!0,enableBulkEdit:!1,shouldShowRowActionsColumn:!1,enableRanking:!1,columnCfgs:[{dataIndex:"c_DeliveryTeam",width:125},{dataIndex:"c_ProjectCategory",width:125},{dataIndex:"Name",hideable:!1,flex:1},{dataIndex:"State",width:90},{dataIndex:"PreliminaryEstimate",width:80,align:"center"},{text:"Total Estimate",dataIndex:"LeafStoryPlanEstimateTotal",width:80,align:"center"},{dataIndex:"PercentDoneByStoryPlanEstimate",width:250,align:"center"},{dataIndex:"PlannedStartDate",width:100,align:"center"},{dataIndex:"PlannedEndDate",width:100,align:"center"}]}),this.add(this.portfolioItemGrid),console.log("END _createGrid")}});

            Rally.launchApp('CustomApp', {
                name:"PortfolioItemsByTag",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
